# 软件交付问题

软件发布当天往往紧张且风险很高，因为很多项目中都是需要很多手工操作的过程。

运维安装好系统环境， 软件包复制到生产主机然后创建配置信息，最后启动程序。

## 发布反模式

发布反模式是指在软件交付过程中，采用了一些不合理的做法，导致了效率低下、错误频发、沟通不畅等问题。

软件发布当天往往紧张且风险很高.

### 反模式1：手动发布

手动发布是最常见的反模式， 需要很多人参与。

无论软件规模，部署过程都会一定的复杂， 如果每个步骤里都有人为执行，那么很容易出错。 且由于执行顺序和时机结果也会有差异。

这些**反模式**特征如下：

- 详细文档： 描述了每个步骤及注意事项
- 手动测试一遍
- 开发团队频繁的沟通协调
- 发布时线上bug需要重新部署
- 发布时长过长
- 不可预测的后果
- 加班疲累

### 反模式2：开发完成才部署灰度

这种模式下，第一次部署到灰度环境意味着**大部分工作已经完成**。

那么通常会有一下情况：

- 测试人员已经经过一轮开发环境测试
- 运维人员对部署前的程序毫不知情，压力大
- 可能环境权限对于特定需求的限制，导致开发人员未能自测

有些问题部署到灰度环境才会发现， 但这时项目工期并不允许再进行一次完整的测试。 **推迟发布日期时不会被人接受的**。

:::danger

情况可能会更糟！如下这些常见问题：

1. 全新开发的程序，第一次部署到灰度，会非常棘手。 协调各种资源。
1. 交付过程被划分为开发、DBA、运维、测试等多个角色， 需要协调沟通。
1. 环境差异大，开发与现实遇到的情况相差越大

:::

### 反模式3：生产环境的手工配置管理

很多组织通过专门的运维来管理生产环境配置， 比如修改数据库连接、增加服务器线程池的线程数需要团队登录生产服务器修改。

这种反模式特征：

- 灰度环境成功，但生产环境失败
- 集群各节点行为不同。
- 运维团队需要为上线准备较长时间
- 系统无法回滚
- 直接修改生产环境，风险较大。

:::tip

对于测试、灰度、生产都需要自动化过程进行版本控制及元素配置。

:::




